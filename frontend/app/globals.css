@import "tailwindcss";

/* include utility classes in streamdown */
@source '../node_modules/streamdown/dist/index.js';

/* Add KaTeX CSS for math rendering */
@import 'katex/dist/katex.min.css';

/* custom variant for setting dark mode programmatically */
@custom-variant dark (&:is(.dark, .dark *));

/* include plugins */
@plugin "tailwindcss-animate";
@plugin "@tailwindcss/typography";

/* Midnight Bloom Theme - Dark Only (DevOps Edition) */
:root {
  /* Deep midnight base with purple-blue undertones */
  --background: hsl(240 20% 6%);
  --foreground: hsl(280 15% 95%);
  --card: hsl(240 18% 10%);
  --card-foreground: hsl(280 15% 95%);
  --popover: hsl(240 18% 8%);
  --popover-foreground: hsl(280 15% 95%);
  
  /* Vibrant cyan-green bloom accent */
  --primary: hsl(170 80% 50%);
  --primary-foreground: hsl(240 20% 8%);
  
  /* Purple secondary for depth */
  --secondary: hsl(260 30% 20%);
  --secondary-foreground: hsl(280 15% 90%);
  
  --muted: hsl(240 15% 15%);
  --muted-foreground: hsl(280 10% 60%);
  
  /* Electric purple accent */
  --accent: hsl(280 60% 35%);
  --accent-foreground: hsl(170 80% 60%);
  
  --destructive: hsl(0 70% 55%);
  --destructive-foreground: hsl(0 0% 98%);
  
  --border: hsl(240 15% 18%);
  --input: hsl(240 15% 16%);
  --ring: hsl(170 80% 50%);
  
  /* Chart colors - vibrant neon palette */
  --chart-1: hsl(170 80% 50%);
  --chart-2: hsl(280 70% 60%);
  --chart-3: hsl(200 80% 60%);
  --chart-4: hsl(320 70% 60%);
  --chart-5: hsl(45 90% 60%);
  
  /* Sidebar with deeper tones */
  --sidebar-background: hsl(240 22% 8%);
  --sidebar-foreground: hsl(280 15% 88%);
  --sidebar-primary: hsl(170 80% 50%);
  --sidebar-primary-foreground: hsl(240 20% 8%);
  --sidebar-accent: hsl(240 18% 14%);
  --sidebar-accent-foreground: hsl(170 80% 60%);
  --sidebar-border: hsl(240 15% 16%);
  --sidebar-ring: hsl(170 80% 50%);
  --sidebar: hsl(240 22% 8%);
  
  --radius: 0.5rem;
}

/* define theme */
@theme {
  --font-sans: var(--font-geist);
  --font-mono: var(--font-geist-mono);

  --breakpoint-toast-mobile: 600px;

  --radius-lg: var(--radius);
  --radius-md: calc(var(--radius) - 2px);
  --radius-sm: calc(var(--radius) - 4px);

  --color-background: var(--background);
  --color-foreground: var(--foreground);

  --color-card: var(--card);
  --color-card-foreground: var(--card-foreground);

  --color-popover: var(--popover);
  --color-popover-foreground: var(--popover-foreground);

  --color-primary: var(--primary);
  --color-primary-foreground: var(--primary-foreground);

  --color-secondary: var(--secondary);
  --color-secondary-foreground: var(--secondary-foreground);

  --color-muted: var(--muted);
  --color-muted-foreground: var(--muted-foreground);

  --color-accent: var(--accent);
  --color-accent-foreground: var(--accent-foreground);

  --color-destructive: var(--destructive);
  --color-destructive-foreground: var(--destructive-foreground);

  --color-border: var(--border);
  --color-input: var(--input);
  --color-ring: var(--ring);

  --color-chart-1: var(--chart-1);
  --color-chart-2: var(--chart-2);
  --color-chart-3: var(--chart-3);
  --color-chart-4: var(--chart-4);
  --color-chart-5: var(--chart-5);

  --color-sidebar: var(--sidebar-background);
  --color-sidebar-foreground: var(--sidebar-foreground);
  --color-sidebar-primary: var(--sidebar-primary);
  --color-sidebar-primary-foreground: var(--sidebar-primary-foreground);
  --color-sidebar-accent: var(--sidebar-accent);
  --color-sidebar-accent-foreground: var(--sidebar-accent-foreground);
  --color-sidebar-border: var(--sidebar-border);
  --color-sidebar-ring: var(--sidebar-ring);
}

/*
  The default border color has changed to `currentcolor` in Tailwind CSS v4,
  so we've added these compatibility styles to make sure everything still
  looks the same as it did with Tailwind CSS v3.

  If we ever want to remove these styles, we need to add an explicit border
  color utility to any element that depends on these defaults.
*/
@layer base {
  *,
  ::after,
  ::before,
  ::backdrop,
  ::file-selector-button {
    border-color: var(--color-gray-200, currentcolor);
  }
}

@utility text-balance {
  text-wrap: balance;
}

@utility -webkit-overflow-scrolling-touch {
  -webkit-overflow-scrolling: touch;
}

@utility touch-pan-y {
  touch-action: pan-y;
}

@utility overscroll-behavior-contain {
  overscroll-behavior: contain;
}

@layer utilities {
  :root {
    --foreground-rgb: 0, 0, 0;
    --background-start-rgb: 214, 219, 220;
    --background-end-rgb: 255, 255, 255;
  }

  @media (prefers-color-scheme: dark) {
    :root {
      --foreground-rgb: 255, 255, 255;
      --background-start-rgb: 0, 0, 0;
      --background-end-rgb: 0, 0, 0;
    }
  }
}

@layer base {
  * {
    @apply border-border;
  }

  body {
    @apply bg-background text-foreground;
    overflow-x: hidden;
    position: relative;
  }

  body::before {
    content: '';
    position: fixed;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    background: 
      radial-gradient(circle at 20% 20%, hsl(170 80% 50% / 0.08) 0%, transparent 50%),
      radial-gradient(circle at 80% 80%, hsl(280 70% 50% / 0.10) 0%, transparent 50%),
      radial-gradient(circle at 50% 50%, hsl(200 80% 50% / 0.05) 0%, transparent 70%),
      radial-gradient(ellipse at 50% 100%, hsl(280 60% 40% / 0.15) 0%, transparent 60%);
    pointer-events: none;
    z-index: 0;
    animation: bloom-pulse 20s ease-in-out infinite;
  }

  @keyframes bloom-pulse {
    0%, 100% {
      opacity: 0.6;
    }
    50% {
      opacity: 0.8;
    }
  }

  html {
    overflow-x: hidden;
  }
}

.skeleton {
  * {
    pointer-events: none !important;
  }

  *[class^="text-"] {
    color: transparent;
    @apply rounded-md bg-foreground/20 select-none animate-pulse;
  }

  .skeleton-bg {
    @apply bg-foreground/10;
  }

  .skeleton-div {
    @apply bg-foreground/20 animate-pulse;
  }
}

/* Glassmorphism utilities */
@layer utilities {
  .glass {
    background: rgba(20, 18, 35, 0.75);
    backdrop-filter: blur(16px);
    -webkit-backdrop-filter: blur(16px);
    border: 1px solid rgba(120, 220, 200, 0.15);
  }

  .glass-dark {
    background: rgba(15, 14, 25, 0.8);
    backdrop-filter: blur(16px);
    -webkit-backdrop-filter: blur(16px);
    border: 1px solid rgba(120, 220, 200, 0.12);
  }

  .glass-card {
    background: rgba(25, 23, 40, 0.85);
    backdrop-filter: blur(20px) saturate(180%);
    -webkit-backdrop-filter: blur(20px) saturate(180%);
    border: 1px solid rgba(120, 220, 200, 0.2);
    box-shadow: 
      0 8px 32px 0 rgba(60, 220, 180, 0.15),
      inset 0 1px 0 0 rgba(120, 220, 200, 0.1);
  }

  .glass-card-dark {
    background: rgba(18, 16, 30, 0.9);
    backdrop-filter: blur(20px) saturate(180%);
    -webkit-backdrop-filter: blur(20px) saturate(180%);
    border: 1px solid rgba(120, 220, 200, 0.18);
    box-shadow: 
      0 8px 32px 0 rgba(60, 220, 180, 0.2),
      inset 0 1px 0 0 rgba(120, 220, 200, 0.08);
  }

  .gradient-primary {
    background: linear-gradient(135deg, hsl(170 80% 50%) 0%, hsl(200 80% 55%) 50%, hsl(280 70% 55%) 100%);
  }

  .gradient-primary-subtle {
    background: linear-gradient(135deg, hsl(170 80% 50% / 0.1) 0%, hsl(280 70% 50% / 0.1) 100%);
  }

  .gradient-midnight {
    background: linear-gradient(135deg, hsl(240 30% 10%) 0%, hsl(260 30% 15%) 50%, hsl(280 30% 12%) 100%);
  }

  .gradient-shine {
    position: relative;
    overflow: hidden;
  }

  .gradient-shine::before {
    content: '';
    position: absolute;
    top: 0;
    left: -100%;
    width: 100%;
    height: 100%;
    background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.3), transparent);
    animation: shine 3s infinite;
  }

  @keyframes shine {
    0% { left: -100%; }
    50%, 100% { left: 100%; }
  }

  .glow-green {
    box-shadow: 0 0 25px rgba(60, 220, 180, 0.4), 0 0 50px rgba(60, 220, 180, 0.2), 0 0 75px rgba(160, 100, 240, 0.15);
  }

  .glow-green-lg {
    box-shadow: 0 0 35px rgba(60, 220, 180, 0.5), 0 0 70px rgba(60, 220, 180, 0.3), 0 0 100px rgba(160, 100, 240, 0.2);
  }

  .glow-purple {
    box-shadow: 0 0 25px rgba(160, 100, 240, 0.4), 0 0 50px rgba(160, 100, 240, 0.2);
  }

  .glow-cyan {
    box-shadow: 0 0 25px rgba(60, 220, 220, 0.4), 0 0 50px rgba(60, 220, 220, 0.2);
  }

  .hover-lift {
    transition: transform 0.2s ease, box-shadow 0.2s ease;
  }

  .hover-lift:hover {
    transform: translateY(-2px);
    box-shadow: 0 12px 40px rgba(0, 237, 100, 0.2);
  }

  .border-gradient {
    border: 2px solid transparent;
    background: 
      linear-gradient(var(--background), var(--background)) padding-box,
      linear-gradient(135deg, hsl(170 80% 50%), hsl(280 70% 55%), hsl(320 70% 55%)) border-box;
  }

  .border-glow {
    border: 1px solid hsl(170 80% 50% / 0.3);
    box-shadow: 0 0 15px hsl(170 80% 50% / 0.2), inset 0 0 10px hsl(170 80% 50% / 0.1);
  }

  .text-gradient {
    background: linear-gradient(135deg, hsl(170 80% 55%) 0%, hsl(200 80% 60%) 30%, hsl(280 70% 65%) 70%, hsl(320 70% 60%) 100%);
    -webkit-background-clip: text;
    -webkit-text-fill-color: transparent;
    background-clip: text;
  }

  .text-gradient-bloom {
    background: linear-gradient(90deg, hsl(170 80% 55%), hsl(280 70% 60%), hsl(320 70% 60%), hsl(170 80% 55%));
    background-size: 200% auto;
    -webkit-background-clip: text;
    -webkit-text-fill-color: transparent;
    background-clip: text;
    animation: gradient-flow 4s linear infinite;
  }

  @keyframes gradient-flow {
    0% { background-position: 0% center; }
    100% { background-position: 200% center; }
  }

  .shimmer {
    background: linear-gradient(
      90deg,
      rgba(255, 255, 255, 0) 0%,
      rgba(255, 255, 255, 0.3) 50%,
      rgba(255, 255, 255, 0) 100%
    );
    background-size: 200% 100%;
    animation: shimmer 2s infinite;
  }

  @keyframes shimmer {
    0% { background-position: -200% 0; }
    100% { background-position: 200% 0; }
  }

  .animated-border {
    position: relative;
    border-radius: 12px;
  }

  .animated-border::before {
    content: '';
    position: absolute;
    inset: -2px;
    border-radius: 12px;
    padding: 2px;
    background: linear-gradient(45deg, hsl(170 80% 50%), hsl(200 80% 55%), hsl(280 70% 55%), hsl(320 70% 55%), hsl(170 80% 50%));
    -webkit-mask: linear-gradient(#fff 0 0) content-box, linear-gradient(#fff 0 0);
    -webkit-mask-composite: xor;
    mask-composite: exclude;
    background-size: 300% 300%;
    animation: gradient-rotate 4s linear infinite;
  }

  @keyframes gradient-rotate {
    0% { background-position: 0% 50%; }
    50% { background-position: 100% 50%; }
    100% { background-position: 0% 50%; }
  }

  .pulse-glow {
    animation: pulse-glow 2s cubic-bezier(0.4, 0, 0.6, 1) infinite;
  }

  @keyframes pulse-glow {
    0%, 100% {
      opacity: 1;
      box-shadow: 0 0 25px rgba(60, 220, 180, 0.5), 0 0 50px rgba(160, 100, 240, 0.3);
    }
    50% {
      opacity: 0.9;
      box-shadow: 0 0 40px rgba(60, 220, 180, 0.7), 0 0 80px rgba(160, 100, 240, 0.4);
    }
  }

  .neon-text {
    text-shadow: 
      0 0 10px hsl(170 80% 50% / 0.8),
      0 0 20px hsl(170 80% 50% / 0.6),
      0 0 30px hsl(170 80% 50% / 0.4),
      0 0 40px hsl(280 70% 55% / 0.3);
  }
}

.ProseMirror {
  outline: none;
}

.cm-editor,
.cm-gutters {
  @apply bg-background! dark:bg-zinc-800! outline-hidden! selection:bg-zinc-900!;
}

.ͼo.cm-focused > .cm-scroller > .cm-selectionLayer .cm-selectionBackground,
.ͼo.cm-selectionBackground,
.ͼo.cm-content::selection {
  @apply bg-zinc-200! dark:bg-zinc-900!;
}

.cm-activeLine,
.cm-activeLineGutter {
  @apply bg-transparent!;
}

.cm-activeLine {
  @apply rounded-r-sm!;
}

.cm-lineNumbers {
  @apply min-w-7;
}

.cm-foldGutter {
  @apply min-w-3;
}

.cm-lineNumbers .cm-activeLineGutter {
  @apply rounded-l-sm!;
}

.suggestion-highlight {
  @apply bg-blue-200 hover:bg-blue-300 dark:hover:bg-blue-400/50 dark:text-blue-50 dark:bg-blue-500/40;
}

/* minimal scrollbar styling */
::-webkit-scrollbar {
  width: 6px;
  height: 6px;
}

::-webkit-scrollbar-track {
  background: transparent;
}

::-webkit-scrollbar-thumb {
  background: var(--border);
  border-radius: 3px;
  transition: background 0.2s ease;
}

::-webkit-scrollbar-thumb:hover {
  background: --alpha(var(--muted-foreground) / 0.5);
}

::-webkit-scrollbar-corner {
  background: transparent;
}

/* firefox scrollbar styling */
* {
  scrollbar-width: thin;
  scrollbar-color: var(--border) transparent;
}

@theme inline {
  --color-sidebar: var(--sidebar);
  --color-sidebar-foreground: var(--sidebar-foreground);
  --color-sidebar-primary: var(--sidebar-primary);
  --color-sidebar-primary-foreground: var(--sidebar-primary-foreground);
  --color-sidebar-accent: var(--sidebar-accent);
  --color-sidebar-accent-foreground: var(--sidebar-accent-foreground);
  --color-sidebar-border: var(--sidebar-border);
  --color-sidebar-ring: var(--sidebar-ring);
}

@layer base {
  * {
    @apply border-border outline-ring/50;
  }
  body {
    @apply bg-background text-foreground;
  }
}
